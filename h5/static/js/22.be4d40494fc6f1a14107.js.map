{"version":3,"sources":["webpack:///src/pages/IndexModule/RecordBack.vue","webpack:///./src/pages/IndexModule/RecordBack.vue?63d6","webpack:///./src/pages/IndexModule/RecordBack.vue"],"names":["RecordBack","data","nDate","Date","nYear","getFullYear","etime","getMonth","getDate","stimeDate","info","status","tabData","name","id","stime","page","totalPage","viplist","statMsg","hlist","rlist","rollCheck","defStime","utype","JSON","parse","window","localStorage","getItem","components","date-com","mounted","this","init","addEventListener","handleScroll","methods","document","documentElement","scrollTop","body","pageYOffset","clientHeight","scrollHeight","getHlistInit","getRebackInit","_this","$http","get","then","res","concat","list","stat","allpage","getsTime","value","geteTime","goExport","location","href","export_url","checkTab","item","rebackMoney","_this2","$message","confirm","title","mobile","message","num","showCancelButton","confirmButtonText","cancelButtonText","$toast","filters","filter","ele","IndexModule_RecordBack","render","_vm","_h","$createElement","_c","_self","staticClass","_l","index","class","active","on","click","$event","_v","_s","attrs","date","eDate","stime-event","etime-event","src","__webpack_require__","directives","rawName","expression","all","week","day","length","avatar","nickname","createtime","_e","allscore","allnums","cardmoney","shcardmoney","admin_name","goods_name","total","used_time","price","daynum","daymoney","refundtime","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.be4d40494fc6f1a14107.js","sourcesContent":["<template>\n<div>\n    <div class=\"tab\">\n        <div v-for=\"(item,index) in tabData\" :class=\"{'active': status==item.id}\" \n        @click='checkTab(item)'>{{item.name}}</div>\n    </div>\n    <div class=\"shop-wrap\">\n        <div class=\"date-wrap\">\n            <date-com :date=\"stime\" :eDate=\"etime\" @stime-event=\"getsTime\" @etime-event=\"geteTime\"></date-com>\n            <img src=\"../../assets/images/store/date-icon.png\" class=\"date-icon\"/>\n        </div>\n        <!-- 会员支付 -->\n        <div class=\"shop-inner\" v-show=\"status==1\">\n            <p class=\"title\">\n                <span>总收入：{{statMsg?statMsg.all:''}}</span>\n                <span>本周：{{statMsg?statMsg.week:''}}</span>\n                <span>今日：{{statMsg?statMsg.day:''}}</span>\n            </p>\n            <p class=\"gray-color no-data-tip\" v-show=\"!viplist||viplist.length==0\">暂无数据</p>\n            <ul v-show=\"viplist.length>0\" class=\"list\">\n                <li v-for=\"item in viplist\">\n                    <img :src=\"item.avatar\" class=\"header-icon\"/>\n                    <div>\n                        <p>{{item.nickname}}</p>\n                        <p>{{item.mobile}}</p>\n                        <p class=\"gray-color\">消费时间：{{item.createtime}}</p>\n                    </div>\n                    <div class=\"txt-r\">\n                        <p class=\"blue-color\">{{item.num}}元</p>\n                        <button class=\"reback\" @click=\"rebackMoney(item)\" v-if=\"utype==1\">退款</button>\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <!-- 核销订单 -->\n        <div class=\"shop-inner\" v-show=\"status==2\">\n            <p class=\"title\">\n                <span>核销总积分：{{statMsg?statMsg.allscore:''}}</span>\n            </p>\n            <p class=\"title\">\n                <span>核销笔数：{{statMsg?statMsg.allnums:''}}</span>\n            </p>\n            <p class=\"title\">\n                <span>核销抵扣金额：{{statMsg?statMsg.cardmoney:''}}</span>\n            </p>\n            <p class=\"title\">\n                <span>商户出资额：{{statMsg?statMsg.shcardmoney:''}}</span>\n            </p>\n            <p class=\"gray-color no-data-tip\" v-show=\"!hlist||hlist.length==0\">暂无数据</p>\n            <ul v-show=\"hlist.length>0\" class=\"list\">\n                <li v-for=\"item in hlist\">\n                    <div>\n                        <p>\n                            {{item.admin_name}} \n                            <span v-show=\"item.utype\">({{item.utype==1?'店长':item.utype==2?'店员':item.utype==3?'财务':''}})</span>\n                        </p>\n                        <p>{{item.goods_name}} ({{item.total}}件)</p>\n                        <p class=\"gray-color\">兑换时间：{{item.used_time}}</p>\n                    </div>\n                    <div class=\"txt-r\">\n                        <p class=\"blue-color\">{{item.price}}积分</p>\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <!-- 退款订单 -->\n        <div class=\"shop-inner\" v-show=\"status==3\">\n            <p class=\"title\">\n                <span>退款总额：{{statMsg?statMsg.all:''}}</span>\n            </p>\n            <p class=\"title\">\n                <span>今日退款笔数：{{statMsg?statMsg.daynum:''}}</span>\n            </p>\n            <p class=\"title\">\n                <span>今日退款总额：{{statMsg?statMsg.daymoney:''}}</span>\n            </p>\n            <ul v-show=\"rlist.length>0\" class=\"list\">\n                <li v-for=\"item in rlist\">\n                    <img :src=\"item.avatar\" class=\"header-icon\"/>\n                    <div>\n                        <p>{{item.nickname}}</p>\n                        <p>{{item.mobile}}</p>\n                        <p class=\"gray-color\">退款时间：{{item.refundtime}}</p>\n                    </div>\n                    <div class=\"txt-r\">\n                        <p class=\"red-color\">{{item.num}}元</p>\n                    </div>\n                </li>\n            </ul>\n            <p class=\"gray-color no-data-tip\"  v-show=\"!rlist||rlist.length==0\">暂无数据</p>\n        </div>\n    </div>\n    <div class='btn-wrap'>\n        <button class='get-btn' @click='goExport' v-if=\"utype!=2\">对账导出</button>\n    </div>\n</div>\n</template>\n<script>\nimport DateRangeCom from \"@/components/dateRangeCom\"\nexport default {\n    data(){\n        var nDate = new Date();\n        var nYear = nDate.getFullYear();\n        var etime = nYear+\"-\"+(nDate.getMonth()+1)+\"-\"+nDate.getDate();\n        var stimeDate = new Date(nYear,0,1);\n        var stime = stimeDate.getFullYear()+\"-\"+(stimeDate.getMonth()+1)+\"-\"+stimeDate.getDate();\n        var info = JSON.parse(window.localStorage.getItem('info'));\n        return{\n            info: '',\n            status: 1,\n            tabData: [\n                {name: '会员支付订单',id: 1},\n                {name: '核销订单',id: 2},\n                {name: '退款订单',id: 3},\n            ],\n            stime: etime,\n            etime: etime,\n            page: 1,\n            totalPage: 0,\n            viplist: [],//会员支付列表\n            statMsg: {},\n            hlist: [],//核销列表\n            rlist: [],//退款列表\n            rollCheck: false,\n            defStime: stime,\n            utype: info.utype\n        }\n    },\n    components:{\n        \"date-com\": DateRangeCom\n    },\n    mounted(){\n        this.init();\n        window.addEventListener('scroll', this.handleScroll, true); \n    },    \n    methods: {\n        handleScroll    : function(){//滚动监听\n            var sT = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;//对象滚动的高度\n            var wH = document.documentElement.clientHeight || document.body.clientHeight;//对象滚动的高度\n            var bH = document.documentElement.scrollHeight || document.body.scrollHeight;//对象滚动的高度\n            if(sT+wH == bH&&this.page<=this.totalPage){\n                if(!this.rollCheck) return false;\n                this.rollCheck = !this.rollCheck;\n                var status = this.status;\n                if(status==1){//会员支付的切换\n                    this.init()\n                }else if(status == 2){//核销订单的切换\n                    this.getHlistInit()\n                }else{//退款订单的切换\n                    this.getRebackInit()\n                }\n            }  \n        },\n        init(){//会员支付\n            var _this = this;\n            this.$http.get(\"do=get_credit2_log_list&m=vipcard&stime=\"+this.stime+\"&etime=\"+this.etime+\"&page=\"+this.page)\n            .then(function(res){\n                _this.info = res;\n                _this.viplist = _this.viplist.concat(res.list);\n                _this.statMsg = res.stat;\n                _this.totalPage = res.allpage;\n                _this.page++;\n                _this.rollCheck = true;\n            })\n        },\n        getHlistInit(){//核销订单\n            var _this = this;\n            this.$http.get(\"do=get_card_stat&m=vipcard&stime=\"+this.stime+\"&etime=\"+this.etime+\"&page=\"+this.page)\n            .then(function(res){\n                _this.info = res;\n                _this.hlist = _this.hlist.concat(res.list);\n                _this.statMsg = res.stat;\n                _this.totalPage = res.allpage;\n                _this.page++;\n                _this.rollCheck = true;\n            })\n        },\n        getRebackInit(){//会员退款\n            var _this = this;\n            this.$http.get(\"do=get_refund_log_list&m=vipcard&stime=\"+this.stime+\"&etime=\"+this.etime+\"&page=\"+this.page)\n            .then(function(res){\n                _this.info = res;\n                _this.rlist = _this.rlist.concat(res.list);\n                _this.statMsg = res.stat;\n                _this.totalPage = res.allpage;\n                _this.page++;\n                _this.rollCheck = true;\n            })\n        },\n        getsTime(value){//获取开始时间\n            this.stime = value;\n            this.page = 1;\n            if(status==1){//会员支付的切换\n                this.viplist = [];\n                this.init()\n            }else if(status == 2){//核销订单的切换\n                this.hlist = [];\n                this.getHlistInit()\n            }else{//退款订单的切换\n                this.rlist = [];\n                this.getRebackInit()\n            }\n            this.getRebackInit();\n        },\n        geteTime(value){//获取开始时间\n            this.etime = value;\n            this.page = 1;\n            if(status==1){//会员支付的切换\n                this.viplist = [];\n                this.init()\n            }else if(status == 2){//核销订单的切换\n                this.hlist = [];\n                this.getHlistInit()\n            }else{//退款订单的切换\n                this.rlist = [];\n                this.getRebackInit()\n            }\n            this.getRebackInit();\n        },\n        goExport(){\n            window.location.href = this.info.export_url\n        },\n        checkTab: function(item){\n            var status = item.id;\n            this.status = item.id;\n            this.page = 1;\n            if(status==1){//会员支付的切换\n                this.viplist = [];\n                this.init()\n            }else if(status == 2){//核销订单的切换\n                this.hlist = [];\n                this.getHlistInit()\n            }else{//退款订单的切换\n                this.rlist = [];\n                this.getRebackInit()\n            }\n        },\n        rebackMoney(item){//退款\n            var _this = this;\n            this.$message.confirm('',{\n                title: '会员号'+item.mobile,\n                message: '支付金额'+item.num+',是否确定退款?',\n                showCancelButton: true,\n                confirmButtonText: '确定退款',\n                cancelButtonText: '取消'  \n            })\n            .then((res) => {\n                if (res === 'confirm') {\n                    this.$http.get(\"do=refund&m=vipcard&id=\"+item.id)\n                    .then(function(res){\n                        _this.$toast({message:\"退款成功\"})\n                        var filters = _this.viplist.filter(ele => {\n                            return ele.id!=item.id;\n                        })\n                        _this.viplist = filters;\n                    })\n                }\n            })\n            \n        }\n    }\n}\n</script>\n<style>\n.mint-msgbox-message{\n    color: #333333;\n}\n</style>\n<style lang=\"scss\" scoped>\n    .gray-color{\n        color: gray;\n        text-align: center;\n    }\n    .blue-color{\n        color: skyblue;\n    }\n    .red-color{\n        color: red;\n    }\n    .tab{\n        width: 100%;\n        background: #fff;\n        position: fixed;\n        left: 0;\n        top: 0;\n        z-index: 10\n    }\n    .tab>div{\n        display: inline-block;\n        width: 33.3%;\n        text-align: center;\n        padding: .3rem 0;\n        box-sizing: border-box;\n        font-size: .3rem;\n    }\n    .tab .active{\n        color: #DC3E56;\n        border-bottom: 1px solid #DC3E56;\n    }\n    .shop-wrap{\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        left: 0;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        padding-top: 1rem;\n    }\n    .shop-inner{\n        background: #fff;\n        padding-bottom: .2rem;\n        .gray-color{\n            text-align: center;\n        }\n    }\n    .title,.title-inner{\n        width: 100%;\n        height: .72rem;\n        padding: 0 .2rem;\n        box-sizing: border-box;\n        display:flex;\n        align-items: center;\n        justify-content: space-between;\n        background: #FAFAFA;\n        border-top: 1px solid #F0F0F0;\n        border-bottom: 1px solid #F0F0F0;\n    }\n    .title{\n        flex: 1;\n    }\n    .title-inner{\n        width: 80%;\n        height: .86rem;\n        margin: .2rem auto;\n        box-shadow: 0 0 10px 0 #ccc;\n        background: #fff;\n        border-radius: 4px;\n    }\n    ul{\n        li{\n            width: 100%;\n            padding: .2rem;\n            box-sizing: border-box;\n            background: #fff;\n            position: relative;\n            >div{\n                display:inline-block;\n                text-align: left;\n                vertical-align: middle;\n            }\n            .txt-r{\n                text-align: right;\n                position: absolute;\n                right: .2rem;\n                top: 50%;\n                margin-top: -.5rem;\n            }\n            .header-icon{\n                width: 1rem;\n                height: 1rem;\n                border-radius: 50%;\n                vertical-align: middle;\n            }\n            .blue-color{\n                text-align: right;\n            }\n            .gray-color{\n                margin-top: .2rem;\n                font-size: .22rem;\n                text-align: left!important;\n            }\n            .reback{\n                background: #00c800;\n                color: #fff;\n                padding: .08rem .2rem;\n                border-radius: 4px;\n                margin-top: .2rem;\n            }\n        }\n        li:nth-child(2n){\n            background: #F5FAFE;\n        }\n    }\n    .btn-wrap{\n        width: 100%;\n        height: .8rem;\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        font-size: 0;\n        button{\n            display: inline-block;\n            width: 100%;\n            height: .8rem;\n            line-height: .8rem;\n            color: #fff;\n            background: #FE0000;\n            border-radius: 0;\n            font-size: .28rem;\n        }\n    }\n    .date-wrap{\n        position: relative;\n        height: .96rem;\n        .date-icon{\n            width: .46rem;\n            position: absolute;\n            top: 50%;\n            right: 10%;\n            margin-top: -.26rem;\n        }\n    }\n    \n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/IndexModule/RecordBack.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tab\"},_vm._l((_vm.tabData),function(item,index){return _c('div',{class:{'active': _vm.status==item.id},on:{\"click\":function($event){return _vm.checkTab(item)}}},[_vm._v(_vm._s(item.name))])}),0),_vm._v(\" \"),_c('div',{staticClass:\"shop-wrap\"},[_c('div',{staticClass:\"date-wrap\"},[_c('date-com',{attrs:{\"date\":_vm.stime,\"eDate\":_vm.etime},on:{\"stime-event\":_vm.getsTime,\"etime-event\":_vm.geteTime}}),_vm._v(\" \"),_c('img',{staticClass:\"date-icon\",attrs:{\"src\":require(\"../../assets/images/store/date-icon.png\")}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status==1),expression:\"status==1\"}],staticClass:\"shop-inner\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"总收入：\"+_vm._s(_vm.statMsg?_vm.statMsg.all:''))]),_vm._v(\" \"),_c('span',[_vm._v(\"本周：\"+_vm._s(_vm.statMsg?_vm.statMsg.week:''))]),_vm._v(\" \"),_c('span',[_vm._v(\"今日：\"+_vm._s(_vm.statMsg?_vm.statMsg.day:''))])]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.viplist||_vm.viplist.length==0),expression:\"!viplist||viplist.length==0\"}],staticClass:\"gray-color no-data-tip\"},[_vm._v(\"暂无数据\")]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viplist.length>0),expression:\"viplist.length>0\"}],staticClass:\"list\"},_vm._l((_vm.viplist),function(item){return _c('li',[_c('img',{staticClass:\"header-icon\",attrs:{\"src\":item.avatar}}),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(_vm._s(item.nickname))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.mobile))]),_vm._v(\" \"),_c('p',{staticClass:\"gray-color\"},[_vm._v(\"消费时间：\"+_vm._s(item.createtime))])]),_vm._v(\" \"),_c('div',{staticClass:\"txt-r\"},[_c('p',{staticClass:\"blue-color\"},[_vm._v(_vm._s(item.num)+\"元\")]),_vm._v(\" \"),(_vm.utype==1)?_c('button',{staticClass:\"reback\",on:{\"click\":function($event){return _vm.rebackMoney(item)}}},[_vm._v(\"退款\")]):_vm._e()])])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status==2),expression:\"status==2\"}],staticClass:\"shop-inner\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"核销总积分：\"+_vm._s(_vm.statMsg?_vm.statMsg.allscore:''))])]),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"核销笔数：\"+_vm._s(_vm.statMsg?_vm.statMsg.allnums:''))])]),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"核销抵扣金额：\"+_vm._s(_vm.statMsg?_vm.statMsg.cardmoney:''))])]),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"商户出资额：\"+_vm._s(_vm.statMsg?_vm.statMsg.shcardmoney:''))])]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hlist||_vm.hlist.length==0),expression:\"!hlist||hlist.length==0\"}],staticClass:\"gray-color no-data-tip\"},[_vm._v(\"暂无数据\")]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hlist.length>0),expression:\"hlist.length>0\"}],staticClass:\"list\"},_vm._l((_vm.hlist),function(item){return _c('li',[_c('div',[_c('p',[_vm._v(\"\\n                            \"+_vm._s(item.admin_name)+\" \\n                            \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.utype),expression:\"item.utype\"}]},[_vm._v(\"(\"+_vm._s(item.utype==1?'店长':item.utype==2?'店员':item.utype==3?'财务':'')+\")\")])]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.goods_name)+\" (\"+_vm._s(item.total)+\"件)\")]),_vm._v(\" \"),_c('p',{staticClass:\"gray-color\"},[_vm._v(\"兑换时间：\"+_vm._s(item.used_time))])]),_vm._v(\" \"),_c('div',{staticClass:\"txt-r\"},[_c('p',{staticClass:\"blue-color\"},[_vm._v(_vm._s(item.price)+\"积分\")])])])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status==3),expression:\"status==3\"}],staticClass:\"shop-inner\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"退款总额：\"+_vm._s(_vm.statMsg?_vm.statMsg.all:''))])]),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"今日退款笔数：\"+_vm._s(_vm.statMsg?_vm.statMsg.daynum:''))])]),_vm._v(\" \"),_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"今日退款总额：\"+_vm._s(_vm.statMsg?_vm.statMsg.daymoney:''))])]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rlist.length>0),expression:\"rlist.length>0\"}],staticClass:\"list\"},_vm._l((_vm.rlist),function(item){return _c('li',[_c('img',{staticClass:\"header-icon\",attrs:{\"src\":item.avatar}}),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(_vm._s(item.nickname))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.mobile))]),_vm._v(\" \"),_c('p',{staticClass:\"gray-color\"},[_vm._v(\"退款时间：\"+_vm._s(item.refundtime))])]),_vm._v(\" \"),_c('div',{staticClass:\"txt-r\"},[_c('p',{staticClass:\"red-color\"},[_vm._v(_vm._s(item.num)+\"元\")])])])}),0),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.rlist||_vm.rlist.length==0),expression:\"!rlist||rlist.length==0\"}],staticClass:\"gray-color no-data-tip\"},[_vm._v(\"暂无数据\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"btn-wrap\"},[(_vm.utype!=2)?_c('button',{staticClass:\"get-btn\",on:{\"click\":_vm.goExport}},[_vm._v(\"对账导出\")]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-29a067b0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/IndexModule/RecordBack.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29a067b0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=styles&index=0!./RecordBack.vue\")\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29a067b0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=styles&index=1!./RecordBack.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=script&index=0!./RecordBack.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=script&index=0!./RecordBack.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29a067b0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=template&index=0!./RecordBack.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-29a067b0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/IndexModule/RecordBack.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}