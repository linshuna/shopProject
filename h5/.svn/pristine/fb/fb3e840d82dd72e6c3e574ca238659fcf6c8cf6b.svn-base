webpackJsonp([41],{IUdl:function(t,s){},dOoX:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={data:function(){return{thumb:"",goods:"",dan:0,num:1,show:!1}},computed:{money:function(){return this.num*this.dan}},mounted:function(){this.$nextTick(function(){var t=this;this.id=this.$route.params.id,this.$http.get("do=detail&m=score_shop&id="+this.id).then(function(s){t.thumb=s.goods.thumb,t.dan=s.goods.marketprice,t.goods={qrcode:s.goods.qrcode}})})},methods:{reduce:function(){var t=this.num;t=--t<=1?1:t,this.num=t},add:function(){var t=this.num;if(++t>this.goods.usermaxbuy)return!1;this.num=t},goBuy:function(){var t=this;this.$http.get("do=info&m=vipcard").then(function(s){if(s.credit1<t.money)return t.$toast({message:"积分不够哦,请充值"}),!1;t.confirmBuy()})},confirmBuy:function(){var t=this;this.$http.get("do=exchange&m=score_shop&id="+this.id+"&num="+this.num).then(function(s){t.$toast({message:"兑换成功"}),setTimeout(function(){t.$router.push("/order")},1e3)})}}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"list-wrap"},[a("div",{staticClass:"list-con"},[a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:t.thumb}})]),t._v(" "),a("div",{staticClass:"con"},[a("p",{staticClass:"shop-title"},[t._v(t._s(t.goods.title))]),t._v(" "),a("p",{staticClass:"gray-color"},[t._v("最多可兑换"+t._s(t.goods.usermaxbuy)+t._s(t.goods.unit))]),t._v(" "),a("p",{staticClass:"gray-color"},[t._v("(季度限定，售完即止)")]),t._v(" "),a("div",{staticClass:"jifen-wrap"},[a("p",{staticClass:"jifen-title"},[a("span",{staticClass:"gray-color"},[t._v("积分：")]),t._v(" "),a("span",{staticClass:"red-color money"},[t._v(t._s(t.dan))])]),t._v(" "),a("div",{staticClass:"operate-wrap"},[a("span",{staticClass:"reduce-btn",on:{click:t.reduce}},[t._v("-")]),t._v(" "),a("div",{staticClass:"num-inp"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],attrs:{readonly:"",type:"number",pattern:"[0-9]*"},domProps:{value:t.num},on:{input:[function(s){s.target.composing||(t.num=s.target.value)},function(s){t.num=Number(s.target.value.replace(/\D+/,"")),t.num,t.goods.usermaxbuy}]}})]),t._v(" "),a("span",{staticClass:"add-btn",on:{click:t.add}},[t._v("+")])])])])]),t._v(" "),a("div",{staticClass:"list-bottom"},[a("span",{staticClass:"gray-color"},[t._v("商品编号："+t._s(t.goods.goodssn))])]),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("button",{staticClass:"get-btn"},[a("span",{staticClass:"gray-color"},[t._v("积分：")]),t._v(" "),a("span",{staticClass:"red-color font-30"},[t._v(t._s(t.money))])]),t._v(" "),a("button",{staticClass:"com-btn",on:{click:t.goBuy}},[t._v("确定兑换")])])])},staticRenderFns:[]};var i=a("Mz/3")(n,o,!1,function(t){a("IUdl")},"data-v-677d1c8a",null);s.default=i.exports}});
//# sourceMappingURL=41.ddf1cd21ac16eedca122.js.map