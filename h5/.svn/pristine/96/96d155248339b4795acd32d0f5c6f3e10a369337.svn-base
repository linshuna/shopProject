webpackJsonp([14],{GyES:function(t,e){},dVLI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("NluW"),a=s("pjeT"),n=(s("gkVn"),s("6fNS")),r={data:function(){var t=new Date,e=t.getFullYear(),s=e+"-"+(t.getMonth()+1)+"-"+t.getDate(),i=new Date(e,0,1);return{currenIdx:0,tabData:[{name:"核销订单",id:1},{name:"核销记录",id:2}],list:null,page:1,totalPage:0,status:1,orderSn:"",stime:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),etime:s,rollCheck:!0}},components:{list:a.a,"no-order":i.a,"date-com":n.a},watch:{orderSn:function(t,e){if(!this.orderSn)return!1;this.orderSn=this.orderSn.replace(/[\W]/g,"")}},mounted:function(){this.$nextTick(function(){this.getJsapi(),this.orderSn=this.$route.params.ordersn,window.addEventListener("scroll",this.handleScroll,!0)})},methods:{handleScroll:function(){if((document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset)+(document.documentElement.clientHeight||document.body.clientHeight)==(document.documentElement.scrollHeight||document.body.scrollHeight)&&this.page<=this.totalPage){if(!this.rollCheck)return!1;this.rollCheck=!this.rollCheck,this.init()}},init:function(){var t=this;this.$http.get("do=clerk_index&m=vipcard").then(function(e){return 1==e.utype?(t.shopInit(0),!1):(t.$http.get("do=info&m=vipcard").then(function(e){t.shopInit(e.id)}),!1)})},shopInit:function(t){var e=this;this.$http.get("do=get_used_order_list&m=vipcard&stime="+this.stime+"&etime="+this.etime+"&adminid="+t+"&page="+this.page).then(function(t){e.list=t.list,e.totalPage=t.allpage,e.page++,e.rollCheck=!0})},getsTime:function(t){this.stime=t,this.page=1,this.list=[],this.init()},geteTime:function(t){this.etime=t,this.page=1,this.list=[],this.init()},checkTab:function(t){if(this.status=t.id,1==t.id)return!1;this.init()},sureOrder:function(){var t=this;if(!this.orderSn)return this.$toast({message:"请输入核销订单号"}),!1;this.$message.confirm("",{title:"是否确定核销该订单",message:" ",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){"confirm"===e&&t.verification()})},saoFn:function(){var t=this;wx.scanQRCode({needResult:0,scanType:["qrCode","barCode"],success:function(e){var s=e.resultStr;t.orderSn=s,t.$router.push("/verOrder/"+s)}})},verification:function(){var t=this;this.$http.get("do=set_used&m=vipcard&sn="+this.orderSn,{forbidden:!0}).then(function(e){t.$toast({message:"核销订单成功"}),t.orderSn=""})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-wrap"},[i("div",{staticClass:"tab"},t._l(t.tabData,function(e,s){return i("div",{class:{active:t.status==e.id},on:{click:function(s){return t.checkTab(e)}}},[t._v(t._s(e.name))])}),0),t._v(" "),1==t.status?i("div",{staticClass:"mainCon"},[i("div",{staticClass:"mainConInner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderSn,expression:"orderSn"}],attrs:{type:"text",placeholder:"请输入订单号"},domProps:{value:t.orderSn},on:{input:function(e){e.target.composing||(t.orderSn=e.target.value)}}}),t._v(" "),i("div",{staticClass:"btn-wrap"},[i("button",{on:{click:t.sureOrder}},[t._v("确认订单")])])]),t._v(" "),i("p",{staticClass:"red-color tip"},[t._v("核销订单请点击微信扫一扫进行核销")])]):t._e(),t._v(" "),2==t.status?i("div",{ref:"contentWrap",staticClass:"shop-wrap"},[i("div",{staticClass:"date-wrap"},[i("date-com",{attrs:{date:t.stime,eDate:t.etime},on:{"stime-event":t.getsTime,"etime-event":t.geteTime}}),t._v(" "),i("img",{staticClass:"date-icon",attrs:{src:s("IARz")}})],1),t._v(" "),t.list&&t.list.length>0?[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.list,expression:"list"}]},t._l(t.list,function(e){return i("li",[i("p",{staticClass:"lr-msg"},[i("span",[t._v(t._s(e.goods_name))]),t._v(" "),i("span",{staticClass:"r-msg"},[t._v("数量 "+t._s(e.total))])]),t._v(" "),i("p",[t._v(t._s(e.nickname))]),t._v(" "),i("p",{staticClass:"gray-color"},[t._v(t._s(e.used_time))])])}),0)]:t.list&&0==t.list.length?[i("p",{staticClass:"gray-color no-tip-data"},[t._v("暂无数据")])]:[i("p",{staticClass:"no-tip-data"},[t._v("数据加载中...")])]],2):t._e()])},staticRenderFns:[]};var c=s("C7Lr")(r,o,!1,function(t){s("fC10")},"data-v-479bb101",null);e.default=c.exports},fC10:function(t,e){},pjeT:function(t,e,s){"use strict";var i={props:{item:{type:Object,default:{}}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-wrap"},[s("div",{staticClass:"list-top"},[s("span",{staticClass:"red-color"},[t._v(t._s(1==t.item.status?"已兑换":3==t.item.status?"已核销":"待核销"))]),t._v(" "),s("span",{staticClass:"gray-color"},[t._v(t._s(t.item.createtime))])]),t._v(" "),s("div",{staticClass:"list-con"},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:t.item.goods_img}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"shop-title"},[t._v(t._s(t.item.goods_name))]),t._v(" "),s("div",{staticClass:"gray-color"},[t._v(t._s(t.item.total))])])]),t._v(" "),s("div",{staticClass:"list-bottom"},[s("p",{staticClass:"gray-color"},[t._v("核销店铺："+t._s(t.item.store_name))]),t._v(" "),s("p",{staticClass:"gray-color"},[t._v("订单编号："+t._s(t.item.ordersn))])])])},staticRenderFns:[]};var n=s("C7Lr")(i,a,!1,function(t){s("GyES")},"data-v-1897b1a2",null);e.a=n.exports}});
//# sourceMappingURL=14.33043f14c5cd0cf8dc8f.js.map